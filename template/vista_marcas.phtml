<?php require_once './template/layout/header.phtml'; ?>
<h1 class="text-center fw-bold mb-4">Nuestras Marcas</h1>
<div class="accordion" id="accordionExample">
  <?php foreach ($marcas as $marca) { ?>
    <div class="accordion-item">
      <h2 class="accordion-header" id="heading<?php echo $marca->id; ?>">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#collapse<?php echo $marca->id; ?>"
                aria-expanded="false" aria-controls="collapse<?php echo $marca->id; ?>">
          <?php echo $marca->nombre; ?>
        </button>
      </h2>
      <div id="collapse<?php echo $marca->id; ?>" class="accordion-collapse collapse"
           aria-labelledby="heading<?php echo $marca->id; ?>" data-bs-parent="#accordionExample">
        <div class="accordion-body">
          <strong>Datos de <?php echo $marca->nombre; ?></strong><br>
          <ul>
            <li>Origen: <?php echo $marca->origen; ?> </li>
            <li>Creador: <?php echo $marca->creador; ?> </li>
            <li>A침o: <?php echo $marca->a침o; ?> </li>
          </ul>

          <div class="d-flex gap-2">
            <a class="btn btn-info" href="<?php echo BASE_URL; ?>/marca/<?php echo $marca->id ?>" role="button">Ver perfumes</a>
           <?php 
if (isset($_SESSION['username'])) {?> <a class="btn btn-warning" href="editar_marca/<?php echo $marca->id ?>" role="button">Editar</a><?php }
?>
<?php if (isset($_SESSION['username'])) {?>            <a class="btn btn-danger" href="eliminar_marca/<?php echo $marca->id ?>" role="button">Eliminar</a><?php }
?>
          </div>

        </div>
      </div>
    </div>
  <?php } ?>
</div>


<?php 
if (isset($_SESSION['username'])) {
    require_once "template/agregar_marca.phtml";
}
?>




<!-- Agregado: fallback para cargar Bootstrap 5 bundle si no est치 disponible -->
<script>
  (function() {
    if (typeof bootstrap === 'undefined') {
      var s = document.createElement('script');
      s.src = 'https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js';
      s.async = false;
      document.head.appendChild(s);
      console.info('Bootstrap bundle cargado desde CDN (fallback).');
    } else {
      console.info('Bootstrap ya est치 disponible.');
    }
  })();
</script>
